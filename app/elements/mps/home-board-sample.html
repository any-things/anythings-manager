<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/things-ajax/things-ajax.html">
<link rel="import" href="../../bower_components/things-grid/things-resource-grid.html">

<link rel="import" href="../../bower_components/things-meta/things-named-meta-behavior.html">
<dom-module id="home-board-sample">
    <template>
        <style>
            :host {
                @apply(--layout-flex);
                @apply(--layout-vertical);
            }
            #container{
                height: 100%;
                display: flex;
                border-radius:4px;
            }
            #scene-board {
                flex-wrap: 1;
                margin: 20px;
                height: 50%;
                width:100%;
            }
        </style>
        <things-ajax
            id="chart-scene-ajax"
            method="GET"
            content-type="plain/text"
            last-response="{{sceneData}}">
        </things-ajax>
        <div id="container">
            <div id="scene-board" class="chart-section"></div>
        </div>

    </template>
    <script>
        Polymer({
            is: 'home-board-sample',
            properties:{
                items:{
                    type: Object
                },
                sceneData:{
                    type: Object,
                    observer: "chartSceneData"
                }
            },
            listeners:{
            },
            
            ready: function() {
                //1. Scene 모델 설정
                var chartAjax = this.$['chart-scene-ajax'];
                chartAjax.resourceUrl = location.origin + '/elements/mps/board-sample.json';
                chartAjax.generateRequest();
            },
        
            chartSceneData: function(e){
                // 1. Scene 모델 설정
                this.sceneModel = e;
                // 2. Scene License 주입
                scene.license(ThingsLicense);
                // 3. Scene 생성
                var sceneViewer = this.$['scene-board'];
                this.chartScene = scene.create({
                    target: sceneViewer,
                    model: this.sceneModel
                });
                // 4. Scene 화면 Fit
                this.chartScene.fit('both');
                // 5. 데이터 바인딩
                this.sceneDataChange();
            },
            sceneDataChange: function(e){
                dataAjax = this.$['data-ajax'];
                dataAjax.generateRequest();
            }
        });
    </script>
</dom-module>
